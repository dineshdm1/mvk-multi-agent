version: '3.8'

services:
  app:
    build: .
    container_name: mavvrik-sdk-assistant
    ports:
      - "${CHAINLIT_PORT:-8000}:8000"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - TAVILY_API_KEY=${TAVILY_API_KEY}
      - MVK_API_KEY=${MVK_API_KEY}
      - MVK_AGENT_ID=${MVK_AGENT_ID:-mavvrik-sdk-assistant}
      - MVK_AGENT_NAME=${MVK_AGENT_NAME:-mvk-sdk-agent}
      - MVK_TENANT_ID=${MVK_TENANT_ID:-mavvrik-internal}
      - LLM_MODEL=${LLM_MODEL:-gpt-4o-mini}
      - CHROMA_COLLECTION=${CHROMA_COLLECTION:-mvk_sdk_docs}
      - CHROMA_PERSIST_DIR=/app/chroma/data
      - CHAINLIT_PORT=${CHAINLIT_PORT:-8000}
      - AUTH_PASSWORD=${AUTH_PASSWORD:-mavvrik@123}
    volumes:
      # Mount docs folder for easy PDF updates
      - ./docs:/app/docs:ro
      # Persist ChromaDB data
      - chroma-data:/app/chroma/data
    restart: unless-stopped

volumes:
  chroma-data:
    driver: local
